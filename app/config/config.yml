imports:
    - { resource: parameters.ini }
    - { resource: security.yml }

framework:
    #esi:             ~
    translator:      { fallback: %locale% }
    secret:          %secret%
    charset:         UTF-8
    router:          { resource: "%kernel.root_dir%/config/routing.yml" }
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    templating:      { engines: ['twig'] } #assets_version: SomeVersionScheme
    session:
        default_locale: %locale%
        auto_start:     true
    translator: ~

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%


# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        # yui_css:
        #     jar: %kernel.root_dir%/java/yuicompressor-2.4.2.jar

# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        auto_mapping: true

# Swiftmailer Configuration
swiftmailer:
    transport: %mailer_transport_dev%
    username:  %mailer_user_dev%
    password:  %mailer_password_dev%

jms_security_extra:
    secure_controllers:  true
    secure_all_services: false

#GalleryBundle Configuration
fabfoto_gallery:
    picture_directory: %upload_directory%
    mailsender: %mail_sender_adress%
gregwar_captcha: ~
fabfoto_zend_tweet: ~
io_form:
    jquery_tinymce:
      source: /bundles/fabfotogallery/tiny_mce/tiny_mce.js
      theme:  advanced

knp_zend_cache:
    templates:
        knp_last_tweets:
            frontend:
                name: Core
                options:
                    lifetime: 300
                    automatic_serialization: true
            backend:
                name: File
                options:
                    cache_dir: %kernel.root_dir%/cache/%kernel.environment%

knp_last_tweets:
    fetcher:
        driver: zend_cache
        options:
            cache_name: knp_last_tweets
avalanche_imagine:
    source_root:  %kernel.root_dir%/../www
    web_root:     %kernel.root_dir%/../www
    cache_prefix: media/cache
    driver:       gd
    filters:
        thumb_square:
            type:    thumbnail
            options: { size: [128, 128], mode: outbound }            
zenstruck_mobile:
    mobile: false
    use_listener: true
    use_helper: true
    use_twig_engine: false
    full_host: fabbook.fr
    mobile_host: fabbook.fr/mobile            

sonata_doctrine_orm_admin:
    # default value is null, so doctrine uses the value defined in the configuration
    entity_manager: ~

    templates:
        form:
            - SonataDoctrineORMAdminBundle:Form:form_admin_fields.html.twig
            - IoFormBundle:Form:fields.html.twig
        filter:
            - SonataDoctrineORMAdminBundle:Form:filter_admin_fields.html.twig
        types:
            list:
                array:      SonataAdminBundle:CRUD:list_array.html.twig
                boolean:    SonataAdminBundle:CRUD:list_boolean.html.twig
                date:       SonataAdminBundle:CRUD:list_date.html.twig
                time:       SonataAdminBundle:CRUD:list_time.html.twig
                datetime:   SonataAdminBundle:CRUD:list_datetime.html.twig
                text:       SonataAdminBundle:CRUD:base_list_field.html.twig
                trans:      SonataAdminBundle:CRUD:list_trans.html.twig
                string:     SonataAdminBundle:CRUD:base_list_field.html.twig
                smallint:   SonataAdminBundle:CRUD:base_list_field.html.twig
                bigint:     SonataAdminBundle:CRUD:base_list_field.html.twig
                integer:    SonataAdminBundle:CRUD:base_list_field.html.twig
                decimal:    SonataAdminBundle:CRUD:base_list_field.html.twig
                identifier: SonataAdminBundle:CRUD:base_list_field.html.twig

            show:
                array:      SonataAdminBundle:CRUD:show_array.html.twig
                boolean:    SonataAdminBundle:CRUD:show_boolean.html.twig
                date:       SonataAdminBundle:CRUD:show_date.html.twig
                time:       SonataAdminBundle:CRUD:show_time.html.twig
                datetime:   SonataAdminBundle:CRUD:show_datetime.html.twig
                text:       SonataAdminBundle:CRUD:base_show_field.html.twig
                trans:      SonataAdminBundle:CRUD:show_trans.html.twig
                string:     SonataAdminBundle:CRUD:base_show_field.html.twig
                smallint:   SonataAdminBundle:CRUD:base_show_field.html.twig
                bigint:     SonataAdminBundle:CRUD:base_show_field.html.twig
                integer:    SonataAdminBundle:CRUD:base_show_field.html.twig
                decimal:    SonataAdminBundle:CRUD:base_show_field.html.twig
sonata_block:
    default_contexts: [cms]
    blocks:
        sonata.admin.block.admin_list:
            contexts:   [admin]

        #sonata.admin_doctrine_orm.block.audit:
        #    contexts:   [admin]

        sonata.block.service.text:
        sonata.block.service.action:
        sonata.block.service.rss:

        # Some specific block from the SonataMediaBundle
        #sonata.media.block.media:
        #sonata.media.block.gallery:
        #sonata.media.block.feature_media:
        
services:
   fabfoto.admin.article:
      class: Fabfoto\AdminBundle\Admin\ArticleAdmin
      tags:
        - { name: sonata.admin, manager_type: orm, group: blog, label: News }
      arguments: [null, Fabfoto\GalleryBundle\Entity\Article, SonataAdminBundle:CRUD]       
   fabfoto.admin.articleBlog:
      class: Fabfoto\AdminBundle\Admin\ArticleBlogAdmin
      tags:
        - { name: sonata.admin, manager_type: orm, group: blog, label: Blog }
      arguments: [null, Fabfoto\GalleryBundle\Entity\ArticleBlog, SonataAdminBundle:CRUD]
   fabfoto.admin.tag:
      class: Fabfoto\AdminBundle\Admin\TagAdmin
      tags:
        - { name: sonata.admin, manager_type: orm, group: blog, label: Tag }
      arguments: [null, Fabfoto\GalleryBundle\Entity\Tag, SonataAdminBundle:CRUD]  
   fabfoto.admin.author:
      class: Fabfoto\AdminBundle\Admin\AuthorAdmin
      tags:
        - { name: sonata.admin, manager_type: orm, group: blog, label: Author }
      arguments: [null, Fabfoto\GalleryBundle\Entity\Author, SonataAdminBundle:CRUD]
   fabfoto.admin.message:
      class: Fabfoto\AdminBundle\Admin\MessageAdmin
      tags:
        - { name: sonata.admin, manager_type: orm, group: Messages, label: Mail }
      arguments: [null, Fabfoto\GalleryBundle\Entity\Message, SonataAdminBundle:CRUD]
   fabfoto.admin.picture:
      class: Fabfoto\AdminBundle\Admin\PictureAdmin
      tags:
        - { name: sonata.admin, manager_type: orm, group: Media, label: Picture }
      arguments: [null, Fabfoto\GalleryBundle\Entity\Picture, SonataAdminBundle:CRUD]  
   fabfoto.admin.album:
      class: Fabfoto\AdminBundle\Admin\AlbumAdmin
      tags:
        - { name: sonata.admin, manager_type: orm, group: Media, label: Album }
      arguments: [null, Fabfoto\GalleryBundle\Entity\Album, SonataAdminBundle:CRUD]        

stof_doctrine_extensions:
    default_locale: fr_FR
    orm:
        default:
            timestampable: true
            sluggable: true
knp_menu:
    twig: true
admingenerator_generator:
    base_admin_template: FabfotoAdminBundle::base_admin.html.twig
    knp_menu_class: Fabfoto\AdminBundle\Menu\AdminMenu
    use_propel: false
    use_doctrine_orm: true
    use_doctrine_odm: false
admingenerator_user:
    login_template: AdmingeneratorGeneratorBundle::base_login_assetic_less.html.twig
genemu_form:
    tinymce:
        script_url: '/bundles/fabfotogallery/tiny_mce/tiny_mce.js'      
        enabled: true
        theme:   advanced      
fos_user:
    db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
    firewall_name: main
    user_class: Fabfoto\UserBundle\Entity\User     
    registration:
        confirmation:
          enabled: true
        form:
            type: fabfoto_user_registration    
